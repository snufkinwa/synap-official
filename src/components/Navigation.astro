---
interface Props {
  activePage?: 'docs' | 'blog';
}

const { activePage } = Astro.props;
---

<nav class="fixed top-0 left-0 right-0 bg-stone-50/80 backdrop-blur-sm z-50 border-b border-gray-200">
  <div class="max-w-7xl mx-auto px-6 py-4">
    <ul class="flex justify-center gap-8 text-sm">
      <li>
        <a 
          href="/docs" 
          class={activePage === 'docs' ? 'font-medium' : 'hover:opacity-70'}
        >
          Docs
        </a>
      </li>
      <li>
        <a 
          href="/blog" 
          class={activePage === 'blog' ? 'font-medium' : 'hover:opacity-70'}
        >
          Blog
        </a>
      </li>
      <li>
        <a 
          href="https://synaptik-core.dev/research" 
          class="hover:opacity-70 external-link"
          data-external="true"
        >
          Research Survey
        </a>
      </li>
      <li>
        <a href="mailto:janayharris@synaptik-core.dev" class="hover:opacity-70">
          Contact
        </a>
      </li>
    </ul>
  </div>
</nav>

<script>
  // Handle external link transitions
  function setupExternalLinks() {
    const externalLinks = document.querySelectorAll('a[data-external="true"]');
    
    externalLinks.forEach(link => {
      link.addEventListener('click', (e) => {
        e.preventDefault();
        const href = (e.currentTarget as HTMLAnchorElement).href;
        
        // Add fade out effect
        document.body.style.transition = 'opacity 0.3s ease-out';
        document.body.style.opacity = '0';
        
        // Navigate after animation
        setTimeout(() => {
          window.location.href = href;
        }, 500);
      });
    });
  }

  // Run on initial load
  setupExternalLinks();

  // Re-run after view transitions
  document.addEventListener('astro:page-load', setupExternalLinks);
</script>

<style>
  .external-link {
    position: relative;
  }

  .external-link::after {
    content: 'â†—';
    display: inline-block;
    margin-left: 0.25rem;
    font-size: 0.75em;
    opacity: 0.6;
  }
</style>
